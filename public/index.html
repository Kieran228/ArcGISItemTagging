<!-- <!DOCTYPE html>

<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no" />
  <title>ArcGIS Maps SDK for JavaScript Tutorials: Implement user authentication</title>


  <link rel="stylesheet" href="https://js.arcgis.com/4.31/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.31/"></script>
  <style>
    html,
    body {
      font-size: 150%;
      margin: 10vh 10vw;
    }
  </style>

  <script>

let arcgis

    require([
      "esri/portal/Portal",
      "esri/identity/OAuthInfo",
      "esri/identity/IdentityManager"
    ], function (Portal, OAuthInfo, esriId) {

      const info = new OAuthInfo({
        appId: "hJvcrv2kp9bpHyRV",
        popup: false // the default
      });
      esriId.registerOAuthInfos([info]);

      esriId
        .checkSignInStatus(info.portalUrl + "/sharing")
        .then(() => {
          handleSignedIn();
        })

        .catch(() => {
          handleSignedOut();

        });

      document.getElementById("sign-in").addEventListener("click", function () {
        esriId.getCredential(info.portalUrl + "/sharing");
      });

      document.getElementById("sign-out").addEventListener("click", function () {
        esriId.destroyCredentials();
        window.location.reload();
      });

      function handleSignedIn() {

        const portal = new Portal();
        portal.load().then(() => {
          console.log(portal)
          const results = { name: portal.user.fullName, username: portal.user.username };
          document.getElementById("results").innerText = JSON.stringify(results, null, 2);
          arcgis = portal.user
        });

      }

      function handleSignedOut() {
        document.getElementById("results").innerText = 'Signed Out'
      }
    });
  </script>

</head>

<body>

  <button id="sign-in" class="btn btn-primary">Sign In</button>
  <button id="sign-out" class="btn btn-primary">Sign Out</button>
  <pre><code id="results"></code></pre>

</body>

</html> -->







<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArcGIS Item Sharing Level</title>
  <style>
    #viewDiv {
      height: 400px;
      width: 100%;
    }
  </style>
  <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.29"></script>
  <script>
    require([
      "esri/config",
      "esri/identity/IdentityManager",
      "esri/portal/Portal",
      "esri/core/urlUtils",
      "esri/portal/PortalItem",
      "dojo/domReady!"
    ], function(
      esriConfig,
      IdentityManager,
      Portal,
      urlUtils,
      PortalItem
    ) {
      esriConfig.apiKey = "hJvcrv2kp9bpHyRV"

      // Initialize the ArcGIS Portal
      var portalUrl = "https://www.arcgis.com/sharing/rest";
      var portal = new Portal();
      portal.authMode = "auto";

      portal.load().then(function() {
        var portalItem = new PortalItem({
          portal: portal,
          id: "307a0cc2298d4b5895a92d85b29036a0"
        });
        portalItem.load().then(function(item) {
          var sharingLevel = item.access.toLowerCase();
          console.log(sharingLevel);
        });
      });

    });
  </script>
</head>
<body>
  <h1>Sharing Level of Item</h1>
</body>
</html>